"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[443],{671:(e,a,t)=>{t.r(a),t.d(a,{contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var n=t(8168),r=(t(6540),t(5680));const i={sidebar_position:2},l="Architecture",o={unversionedId:"architecture",id:"architecture",isDocsHomePage:!1,title:"Architecture",description:"This document provides a detailed overview of BrowserBee's architecture, component structure, and code organization.",source:"@site/docs/architecture.md",sourceDirName:".",slug:"/architecture",permalink:"/browserbee/docs/architecture",editUrl:"https://github.com/parsaghaffari/browserbee/edit/main/docs/docs/architecture.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction to BrowserBee",permalink:"/browserbee/docs/intro"},next:{title:"User Guide",permalink:"/browserbee/docs/user-guide"}},s=[{value:"Overview",id:"overview",children:[]},{value:"Detailed Architecture",id:"detailed-architecture",children:[{value:"Models Module",id:"models-module",children:[]},{value:"Agent Module",id:"agent-module",children:[]},{value:"Background Module",id:"background-module",children:[]},{value:"UI Module",id:"ui-module",children:[]},{value:"Tracking Module",id:"tracking-module",children:[]}]},{value:"Data Flow",id:"data-flow",children:[]},{value:"Component Relationships",id:"component-relationships",children:[]},{value:"Provider System",id:"provider-system",children:[]},{value:"Ollama Integration",id:"ollama-integration",children:[]},{value:"File Organization",id:"file-organization",children:[]},{value:"Design Principles",id:"design-principles",children:[]}],g={toc:s},p="wrapper";function m(e){let{components:a,...t}=e;return(0,r.yg)(p,(0,n.A)({},g,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"architecture"},"Architecture"),(0,r.yg)("p",null,"This document provides a detailed overview of BrowserBee's architecture, component structure, and code organization."),(0,r.yg)("h2",{id:"overview"},"Overview"),(0,r.yg)("p",null,"BrowserBee uses a modular agent architecture with four key modules:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Agent Module")," \u2013 Processes user instructions and maps them to browser actions"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Background Module")," \u2013 Manages tab control, messaging, and task streaming"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"UI Module")," \u2013 Provides a clean sidebar interface for interaction and configuration"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Models Module")," \u2013 Provides a flexible interface for multiple LLM providers")),(0,r.yg)("h2",{id:"detailed-architecture"},"Detailed Architecture"),(0,r.yg)("h3",{id:"models-module"},"Models Module"),(0,r.yg)("p",null,"The Models Module provides a flexible interface for multiple LLM providers:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/types.ts"),": Common interfaces for all providers"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"ModelInfo"),": Information about a model (name, pricing, etc.)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"ProviderOptions"),": Configuration options for a provider"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"StreamChunk"),": Common format for streaming responses"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"LLMProvider"),": Interface that all providers must implement"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/factory.ts"),": Factory function to create providers"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Creates the appropriate provider based on configuration"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/anthropic.ts"),": Anthropic Claude provider implementation"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles Claude-specific streaming and features"),(0,r.yg)("li",{parentName:"ul"},"Supports Claude's thinking feature"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/openai.ts"),": OpenAI GPT provider implementation"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles OpenAI-specific streaming and features"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/gemini.ts"),": Google Gemini provider implementation"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles Gemini-specific streaming and features"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/ollama.ts"),": Ollama provider implementation"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Connects to locally running Ollama models"),(0,r.yg)("li",{parentName:"ul"},"Uses browser-compatible version of the Ollama library"),(0,r.yg)("li",{parentName:"ul"},"Supports streaming responses from local models"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/ollama-format.ts"),": Ollama message format transformer"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Converts between Anthropic and Ollama message formats"),(0,r.yg)("li",{parentName:"ul"},"Handles complex message structures with tools and images"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"models/providers/openai-compatible.ts"),": OpenAI compatible provider implementation"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles compatible OpenAI-specific streaming and features")))),(0,r.yg)("h3",{id:"agent-module"},"Agent Module"),(0,r.yg)("p",null,"The Agent Module is responsible for processing user instructions and executing browser automation tasks. It consists of a few sub-modules:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/AgentCore.ts"),": Main agent class that coordinates all components"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Uses the provider factory to create the appropriate LLM provider"),(0,r.yg)("li",{parentName:"ul"},"Configurable with different LLM providers"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/TokenManager.ts"),": Token estimation and message history trimming")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/ToolManager.ts"),": Tool wrapping with health checks")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/PromptManager.ts"),": System prompt generation")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/MemoryManager.ts"),": Memory lookup and integration")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/ErrorHandler.ts"),": Cancellation and error handling")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/ExecutionEngine.ts"),": Streaming and non-streaming execution"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Provider-agnostic implementation that works with any LLM provider"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/approvalManager.ts"),": Handles user approval for sensitive actions")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"agent/tools/"),": Browser automation tools organized by functionality"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"navigationTools.ts"),": Browser navigation functions (go to URL, back, forward, refresh)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"interactionTools.ts"),": User interaction functions (click, type, scroll)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"observationTools.ts"),": Page observation functions (screenshot, DOM access, content extraction)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"mouseTools.ts"),": Mouse movement and interaction (move, hover, drag)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"keyboardTools.ts"),": Keyboard input functions (press keys, keyboard shortcuts)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"tabTools.ts"),": Tab management functions (create, switch, close tabs)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"memoryTools.ts"),": Memory storage and retrieval functions"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"types.ts"),": Type definitions for tools"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"utils.ts"),": Utility functions for tools"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"index.ts"),": Tool exports and registration")))),(0,r.yg)("h3",{id:"background-module"},"Background Module"),(0,r.yg)("p",null,"The Background Module manages the extension's background processes, including tab control and communication."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/index.ts"),": Entry point for the background script"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/tabManager.ts"),": Tab attachment and management",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles connecting to tabs"),(0,r.yg)("li",{parentName:"ul"},"Manages tab state and lifecycle"),(0,r.yg)("li",{parentName:"ul"},"Coordinates tab interactions"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/agentController.ts"),": Agent initialization and execution",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Creates and configures the agent"),(0,r.yg)("li",{parentName:"ul"},"Processes user instructions"),(0,r.yg)("li",{parentName:"ul"},"Manages agent execution flow"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/streamingManager.ts"),": Streaming functionality",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles streaming of agent responses"),(0,r.yg)("li",{parentName:"ul"},"Manages segmentation of responses"),(0,r.yg)("li",{parentName:"ul"},"Controls streaming state"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/messageHandler.ts"),": Message routing and handling",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Processes messages between components"),(0,r.yg)("li",{parentName:"ul"},"Routes messages to appropriate handlers"),(0,r.yg)("li",{parentName:"ul"},"Manages message queue"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/configManager.ts"),": Provider configuration management",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Stores and retrieves provider configuration"),(0,r.yg)("li",{parentName:"ul"},"Validates provider configuration requirements"),(0,r.yg)("li",{parentName:"ul"},"Provides a singleton instance for global access"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/types.ts"),": Type definitions for background processes"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"background/utils.ts"),": Utility functions for background processes")),(0,r.yg)("h3",{id:"ui-module"},"UI Module"),(0,r.yg)("p",null,"The UI Module provides the user interface for interacting with the extension."),(0,r.yg)("h4",{id:"side-panel"},"Side Panel"),(0,r.yg)("p",null,"The Side Panel is the main interface for interacting with BrowserBee. It has been refactored into a modular component structure:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sidepanel/SidePanel.tsx"),": Main component that orchestrates the UI"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Composes all UI components"),(0,r.yg)("li",{parentName:"ul"},"Coordinates state and functionality through hooks"),(0,r.yg)("li",{parentName:"ul"},"Manages overall layout and structure"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sidepanel/types.ts"),": Type definitions for the side panel"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Message types and interfaces"),(0,r.yg)("li",{parentName:"ul"},"Chrome message interfaces"),(0,r.yg)("li",{parentName:"ul"},"Other shared types"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sidepanel/components/"),": Modular UI components"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"LlmContent.tsx"),": Renders LLM content with tool calls",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Processes and displays markdown content"),(0,r.yg)("li",{parentName:"ul"},"Handles special formatting for tool calls"),(0,r.yg)("li",{parentName:"ul"},"Applies styling to different content elements"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"ScreenshotMessage.tsx"),": Renders screenshot images",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Displays base64-encoded screenshots"),(0,r.yg)("li",{parentName:"ul"},"Handles image formatting and sizing"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"MessageDisplay.tsx"),": Handles rendering of different message types",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Manages message filtering"),(0,r.yg)("li",{parentName:"ul"},"Coordinates rendering of system, LLM, and screenshot messages"),(0,r.yg)("li",{parentName:"ul"},"Handles streaming segments"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"OutputHeader.tsx"),": Manages the output section header with toggle controls",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Provides controls for clearing history"),(0,r.yg)("li",{parentName:"ul"},"Manages system message visibility toggle"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"PromptForm.tsx"),": Handles the input form and submission",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Manages prompt input"),(0,r.yg)("li",{parentName:"ul"},"Handles form submission"),(0,r.yg)("li",{parentName:"ul"},"Provides cancel functionality during processing"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"TabStatusBar.tsx"),": Displays the current tab information",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Shows active tab ID and title"),(0,r.yg)("li",{parentName:"ul"},"Indicates connection status"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"TokenUsageDisplay.tsx"),": Displays token usage and provider information",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Shows current LLM provider and model"),(0,r.yg)("li",{parentName:"ul"},"Tracks input and output tokens"),(0,r.yg)("li",{parentName:"ul"},"Displays estimated cost"))))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sidepanel/hooks/"),": Custom React hooks for state and functionality"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"useTabManagement.ts"),": Manages tab-related functionality",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles tab connection"),(0,r.yg)("li",{parentName:"ul"},"Tracks tab state"),(0,r.yg)("li",{parentName:"ul"},"Updates tab information"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"useMessageManagement.ts"),": Handles message state and processing",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Manages message history"),(0,r.yg)("li",{parentName:"ul"},"Controls streaming state"),(0,r.yg)("li",{parentName:"ul"},"Provides message manipulation functions"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"useChromeMessaging.ts"),": Manages communication with the Chrome extension API",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Listens for Chrome messages"),(0,r.yg)("li",{parentName:"ul"},"Sends messages to background script"),(0,r.yg)("li",{parentName:"ul"},"Handles message processing")))))),(0,r.yg)("h4",{id:"options-page"},"Options Page"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"options/Options.tsx"),": Main component that orchestrates the options UI",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Manages state and configuration"),(0,r.yg)("li",{parentName:"ul"},"Composes all options components"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"options/index.tsx"),": Entry point for the options page"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"options/components/"),": Modular UI components for the options page",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"AboutSection.tsx"),': Displays the "About" information'),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"ProviderSelector.tsx"),": Handles provider selection"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"AnthropicSettings.tsx"),", ",(0,r.yg)("strong",{parentName:"li"},"OpenAISettings.tsx"),", ",(0,r.yg)("strong",{parentName:"li"},"GeminiSettings.tsx"),", ",(0,r.yg)("strong",{parentName:"li"},"OllamaSettings.tsx"),": Provider-specific settings"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"OpenAICompatibleSettings.tsx"),": Settings for OpenAI-compatible providers"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"ModelList.tsx"),": Manages model list for OpenAI-compatible providers"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"OllamaModelList.tsx"),": Manages custom model list for Ollama provider"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"ModelPricingTable.tsx"),": Displays model pricing information"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"MemoryManagement.tsx"),": Handles memory export/import functionality"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"SaveButton.tsx"),": Manages settings saving functionality"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"LLMProviderConfig.tsx"),": Combines provider selection and settings"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"ProviderSettings.tsx"),": Renders the appropriate provider settings component")))),(0,r.yg)("h3",{id:"tracking-module"},"Tracking Module"),(0,r.yg)("p",null,"The Tracking Module handles memory storage, token tracking, and other tracking-related functionality."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"tracking/memoryService.ts"),": Manages storage and retrieval of agent memories",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Handles IndexedDB operations"),(0,r.yg)("li",{parentName:"ul"},"Provides memory storage and retrieval"),(0,r.yg)("li",{parentName:"ul"},"Includes self-healing database functionality"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"tracking/tokenTrackingService.ts"),": Tracks token usage for API calls"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"tracking/screenshotManager.ts"),": Manages screenshot storage and retrieval"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"tracking/domainUtils.ts"),": Utilities for working with domains")),(0,r.yg)("h2",{id:"data-flow"},"Data Flow"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"User enters a prompt in the Side Panel"),(0,r.yg)("li",{parentName:"ol"},"The prompt is sent to the Background Module"),(0,r.yg)("li",{parentName:"ol"},"The Background Module initializes the Agent with the configured LLM provider"),(0,r.yg)("li",{parentName:"ol"},"The Agent processes the prompt and executes browser actions:",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"TokenManager handles token estimation and history trimming"),(0,r.yg)("li",{parentName:"ul"},"PromptManager generates the system prompt"),(0,r.yg)("li",{parentName:"ul"},"ExecutionEngine manages the execution flow"),(0,r.yg)("li",{parentName:"ul"},"ToolManager provides access to browser tools"),(0,r.yg)("li",{parentName:"ul"},"MemoryManager integrates relevant memories"),(0,r.yg)("li",{parentName:"ul"},"ErrorHandler manages error conditions"))),(0,r.yg)("li",{parentName:"ol"},"Results are streamed back to the Side Panel"),(0,r.yg)("li",{parentName:"ol"},"The Side Panel displays the results to the user")),(0,r.yg)("h2",{id:"component-relationships"},"Component Relationships"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"The Side Panel communicates with the Background Module through Chrome messaging"),(0,r.yg)("li",{parentName:"ul"},"The Background Module manages the Agent and coordinates its actions"),(0,r.yg)("li",{parentName:"ul"},"The Agent Core coordinates the specialized components (TokenManager, ToolManager, etc.)"),(0,r.yg)("li",{parentName:"ul"},"Each specialized component handles a specific aspect of the agent's functionality"),(0,r.yg)("li",{parentName:"ul"},"The Agent uses tools to interact with the browser"),(0,r.yg)("li",{parentName:"ul"},"The Tracking Module provides persistence and monitoring services"),(0,r.yg)("li",{parentName:"ul"},"The Options Page configures the extension settings used by the Background Module"),(0,r.yg)("li",{parentName:"ul"},"The Models Module provides a flexible interface for multiple LLM providers")),(0,r.yg)("h2",{id:"provider-system"},"Provider System"),(0,r.yg)("h2",{id:"ollama-integration"},"Ollama Integration"),(0,r.yg)("p",null,"The Ollama integration allows users to connect to locally running Ollama models:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Browser Compatibility"),": Uses the browser-compatible version of the Ollama library"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"API Key Optional"),": Unlike other providers, Ollama doesn't require an API key"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"CORS Configuration"),": Requires CORS to be enabled on the Ollama server"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Custom Models"),": Supports user-defined custom models with configurable context windows"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Configuration Requirements"),": Requires both a base URL and at least one custom model to be configured"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Privacy-Focused"),": Provides a privacy-focused alternative to cloud-based LLM providers")),(0,r.yg)("p",null,"The provider system follows these design patterns:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Interface Segregation"),": Each provider implements a common interface"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Factory Pattern"),": A factory function creates the appropriate provider"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Adapter Pattern"),": Each provider adapts its specific API to the common interface"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Strategy Pattern"),": Different providers can be swapped at runtime"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Singleton Pattern"),": The ConfigManager provides a single point of access to configuration")),(0,r.yg)("h2",{id:"file-organization"},"File Organization"),(0,r.yg)("p",null,"The project follows a modular structure with clear separation of concerns:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Each module has its own directory"),(0,r.yg)("li",{parentName:"ul"},"Components are organized by functionality"),(0,r.yg)("li",{parentName:"ul"},"Types are defined close to where they are used"),(0,r.yg)("li",{parentName:"ul"},"Hooks encapsulate related state and functionality"),(0,r.yg)("li",{parentName:"ul"},"Utility functions are separated into dedicated files")),(0,r.yg)("h2",{id:"design-principles"},"Design Principles"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Separation of Concerns"),": Each component and module has a single responsibility"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Modularity"),": Components and modules can be developed and tested independently"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Reusability"),": Common functionality is extracted into reusable components and hooks"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Type Safety"),": TypeScript is used throughout the project for type safety"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Maintainability"),": Code is organized to be easy to understand and maintain"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Resilience"),": Self-healing mechanisms are implemented for critical components"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Lifecycle Management"),": Extension installation, updates, and uninstallation are properly handled"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Provider Abstraction"),": LLM providers are abstracted behind a common interface")))}m.isMDXComponent=!0}}]);